---
#
# Ansible managed
#
language: python

python:
  - "3.8"

services:
  - docker

env:
  global:
    namespace="robertdebock"
  matrix:
    - image="alpine" tag="latest"
    - image="alpine" tag="edge"
    - image="centos" tag="7"
    - image="centos" tag="latest"
    - image="debian" tag="latest"
    - image="debian" tag="bullseye"
    - image="fedora" tag="31"
    - image="fedora" tag="latest"
    - image="opensuse" tag="latest"
    - image="ubuntu" tag="latest"
    - image="ubuntu" tag="bionic"
    - image="ubuntu" tag="xenial"

cache:
  - pip

install:
  - pip install --upgrade pip
  - pip install tox

script:
  - function retry { counter=0 ; until "$@" ; do exit=$? ; counter=$(($counter + 1)) ; if [ $counter -ge 3 ] ; then return $exit ; fi ; done ; return 0; } ; retry tox --parallel all

notifications:
  webhooks: https://galaxy.ansible.com/api/v1/notifications/
  slack: "TpbmU/Y0PnskO9MmRotZzpqarEDrucfxAyttdQCKDb9vXFe1ML+rFJ9cy3106DWPowhjLc/bCriJDMZHpjuqEDPkWIE7bMitrs3HO6EMmpiAxyLz/JFbkAwTYdriWLAMUD6kY/Rs3LyKiSJCr1xQ25WWOYR2AOH1sAr17yG07YDyu/oW27xYyqQ6Kx3HH0e71qPb9yYQnvpenfzGKiMNWfB2w9T9aD4w2Jk8aX6y/VUsZQhze3elnuUwbKAtWrq6uYWl/JGr12gtMYp7mUpb0lUKWeZNSYdhtZQpLGu1+lBW3XN2+TnLrmFMcRZHgL9W/77ZkGPKM+6Wr1ZXbzErQjUrKutQ2VaP9uct/tAmuSQbzB9LATCYTPG/s3czatA2oCL/Lw32CQCxzBGuqr1W9szppuj5DOGXLlfGMCgZ/I49pAVxWPmJm5g/3nFFpcfNMH7xOc0a2C5/axD/dKGfNOSOBpTV0LFnRf6ulm20YQShXowNrBgu9bm5mo70NmPBXb2EPgV284ZskVQ585Z4ja8mbasrtoe2o/R3/gWiye8vPi+9RqYaOrQAD9ORBNOGqhKgwdyAC3rKtCE1ZoI3dQhLXMbX1tSC5utmb1w/S1uA55jhzstBdvE3tWFcs/E36zLqHX9HogP4U7jrkGFhSZd+18j07MQOPXmyXS75Ne0="
  email: false
